var x, i, j, selElmnt, a, b, c, toast = new Toasty({
    classname: "toasts",
    transition: "scale",
    insertBefore: !1,
    progressBar: !1,
    enableSounds: !1
});

function preadURL(e) {
    if (e.files && e.files[0]) {
        var s = new FileReader;
        s.onload = function(e) {
            $(".imagePreviews").css("background-image", "url(" + e.target.result + ")"), $(".imagePreviews").hide(), $(".imagePreviews").fadeIn(650)
        }, s.readAsDataURL(e.files[0])
    }
}

function preadURL1(e) {
    if (e.files && e.files[0]) {
        var s = new FileReader;
        s.onload = function(e) {
            document.getElementById("sigPreviewsThumb").src = e.target.result, $("#sigPreviewsThumb").hide(), $("#sigPreviewsThumb").fadeIn(650)
        }, s.readAsDataURL(e.files[0])
    }
}

function getProfile() {
    $.ajaxSetup({
        headers: {
            "X-CSRF-TOKEN": $('meta[name="_token"]').attr("content")
        }
    }), $.ajax({
        url: WEBURL + "/getProfile",
        method: "post",
        success: function(e) {
            $("#name").val(e.name), $("#userhandle").val(e.handle), $("#ppic").val(WEBURL + "/media/profile_pic/" + e.pic), $("#userwebsite").val(e.website)
        }
    })
}
for (toast.transition("scale"), $("#fileToUpload").change(function() {
        preadURL(this)
    }), $("#sigToUpload").change(function() {
        preadURL1(this)
    }), $("#saveprofile").on("click", function(e) {
        e.preventDefault();
        let s = new FormData;
        s.append("name", $("#name").val()), s.append("handle", $("#userhandle").val()), s.append("website", $("#userwebsite").val());
        let t = document.getElementById("fileToUpload").files,
            a = document.getElementById("sigToUpload").files;
        if (t.length >= 1) {
            let e = t[0];
            s.append("fileToUpload", e)
        }
        if (a.length >= 1) {
            let e = a[0];
            s.append("sigToUpload", e)
        }
        $.ajax({
            url: PROFILECAR,
            method: "POST",
            headers: {
                "X-CSRF-TOKEN": $('meta[name="_token"]').attr("content")
            },
            async: !0,
            contentType: !1,
            processData: !1,
            data: s,
            success: function(e) {
                splitbee.track("Profile Updated"), $("#profilemodal").modal("toggle"), toast.info("Profile updated successfully"), getProfile()
            }
        })
    }), $("#login_submit").click(function(e) {
        console.log("login clicked"), $(this).find("span").html(""), $(this).find(".loader2").css("display", "block"), e.preventDefault(), $.ajaxSetup({
            headers: {
                "X-CSRF-TOKEN": $('meta[name="_token"]').attr("content")
            }
        }), $.ajax({
            url: LOGINROUTE,
            method: "post",
            data: {
                email: $("#login_email").val(),
                password: $("#login_password").val(),
                remember: $("#rememberMe").val()
            },
            success: e => {
                "error" == e ? ($(".message_danger0").html(""), $(".message_danger0").show(), $(".message_danger0").append('<p class="alert alert-danger animated shake">Invalid Credentials.</p>'), $(this).find("span").html("Login"), $(this).find(".loader2").css("display", "none")) : "Done" == e ? window.location.href = HOMEURL : alert("hello")
            }
        })
    }), $("#reset").click(function(e) {
        $(this).find("span").html(""), $(this).find(".loader2").css("display", "block"), e.preventDefault(), $.ajaxSetup({
            headers: {
                "X-CSRF-TOKEN": $('meta[name="_token"]').attr("content")
            }
        }), $.ajax({
            url: FORGETURL,
            method: "post",
            data: {
                email: $("#forget_password").val()
            },
            success: e => {
                "error" == e ? ($(".message_danger0").html(""), $(".message_danger0").show(), $(".message_danger0").append('<p class="alert alert-danger">Email not registered</p>'), $(this).find("span").html("Reset"), $(this).find(".loader2").css("display", "none")) : "Done" == e ? ($(".message_danger0").html(""), $(".message_danger0").show(), $(".message_danger0").append('<p class="alert alert-info">Password recovery email sent! Check your email</p>'), $(this).find("span").html("Reset"), $(this).find(".loader2").css("display", "none")) : alert("Sorry")
            }
        })
    }), $(document).ready(function() {
        $("#signup_email").keyup(function() {
            ! function(e) {
                var s = $("#signup_email").val(),
                    t = s.indexOf("@");
                if (t > 0) {
                    var a = s.lastIndexOf(".");
                    if (a > t) return "" != s.substring(a + 2)
                }
            }() ? ($("#hidden_fields").slideUp(200), $("#signup_email_success").css("display", "none"), $("#signup_email_danger").css("display", "block"), $("#signup_btn").removeAttr("disabled")) : ($("#hidden_fields").slideDown(200), $("#signup_btn").attr("disabled", "true"), $("#signup_email_success").css("display", "block"), $("#signup_email_danger").css("display", "none"))
        }), $("#signup_cpassword").on("change keydown paste input", function() {
            $("#signup_cpassword").val() == $("#signup_password").val() ? $("#signup_cpassword_danger").css("display", "none") : $("#signup_cpassword_danger").css("display", "block")
        }), $("#autoSizingCheck2").on("change keydown paste input", function() {
            this.checked ? $("#signup_btn").removeAttr("disabled") : $("#signup_btn").attr("disabled", "true")
        })
    }), $(function() {
        $('[data-toggle="tooltip"]').tooltip(), $('[data-toggle="popover"]').popover(), $("a.page-scroll").bind("click", function(e) {
            var s = $(this);
            $("html, body").stop().animate({
                scrollTop: $(s.attr("href")).offset().top - 80
            }, 1e3), e.preventDefault()
        });
        var e = 0;
        $(window).scroll(function() {
            var s = $(window).scrollTop();
            return s > 80 ? s > e ? $(".smart-scroll").addClass("scrolling").removeClass("up") : $(".smart-scroll").addClass("up") : $(".smart-scroll").removeClass("scrolling").removeClass("up"), e = s, s >= 600 ? $(".scroll-top").addClass("active") : $(".scroll-top").removeClass("active"), !1
        }), $(".scroll-top").click(function() {
            $("html, body").stop().animate({
                scrollTop: 0
            }, 1e3)
        }), $(".switcher-trigger").click(function() {
            $(".switcher-wrap").toggleClass("active")
        }), $(".color-switcher ul li").click(function() {
            var e = $(this).attr("data-color");
            $("#theme-color").attr("href", "asset/css/" + e + ".css"), $(".color-switcher ul li").removeClass("active"), $(this).addClass("active")
        })
    }), x = document.getElementsByClassName("custom-select"), i = 0; i < x.length; i++) {
    for (selElmnt = x[i].getElementsByTagName("select")[0], (a = document.createElement("DIV")).setAttribute("class", "select-selected"), a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML, x[i].appendChild(a), (b = document.createElement("DIV")).setAttribute("class", "select-items select-hide"), j = 1; j < selElmnt.length; j++)(c = document.createElement("DIV")).innerHTML = selElmnt.options[j].innerHTML, c.addEventListener("click", function(e) {
        var s, t, a, n, l;
        for (n = this.parentNode.parentNode.getElementsByTagName("select")[0], l = this.parentNode.previousSibling, t = 0; t < n.length; t++)
            if (n.options[t].innerHTML == this.innerHTML) {
                for (n.selectedIndex = t, l.innerHTML = this.innerHTML, s = this.parentNode.getElementsByClassName("same-as-selected"), a = 0; a < s.length; a++) s[a].removeAttribute("class");
                this.setAttribute("class", "same-as-selected");
                break
            }
        l.click()
    }), b.appendChild(c);
    x[i].appendChild(b), a.addEventListener("click", function(e) {
        e.stopPropagation(), closeAllSelect(this), this.nextSibling.classList.toggle("select-hide"), this.classList.toggle("select-arrow-active")
    })
}

function closeAllSelect(e) {
    var s, t, a, n = [];
    for (s = document.getElementsByClassName("select-items"), t = document.getElementsByClassName("select-selected"), a = 0; a < t.length; a++) e == t[a] ? n.push(a) : t[a].classList.remove("select-arrow-active");
    for (a = 0; a < s.length; a++) n.indexOf(a) && s[a].classList.add("select-hide")
}
document.addEventListener("click", closeAllSelect);